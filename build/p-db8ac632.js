let n;const i=i=>{if(void 0===n){const t=void 0!==i.style.webkitAnimationName;n=void 0===i.style.animationName&&t?"-webkit-":""}return n},t=(n,t,e)=>{const o=t.startsWith("animation")?i(n):"";n.style.setProperty(o+t,e)},e=(n,t)=>{const e=t.startsWith("animation")?i(n):"";n.style.removeProperty(e+t)},o=[],a=(n=[],i)=>{if(void 0!==i){const t=Array.isArray(i)?i:[i];return[...n,...t]}return n},r=n=>{let r,s,m,d,l,f,c,u,v,y,p,A,$,g=[],b=[],F=[],k=!1,C={},E=[],q=[],h={},w=0,S=!1,T=!1,R=!0,D=!1,W=!0;const I=n,M=[],x=[],z=[],K=[],P=[],Z=[],j=[],B=[],G=[],H=[],J="function"==typeof AnimationEffect||"function"==typeof window.AnimationEffect,L="function"==typeof Element&&"function"==typeof Element.prototype.animate&&J,N=(n,i)=>((i&&i.oneTimeCallback?x:M).push({c:n,o:i}),$),O=()=>{L?(H.forEach((n=>{n.cancel()})),H.length=0):requestAnimationFrame((()=>{}))},Q=()=>{P.forEach((n=>{n&&n.parentNode&&n.parentNode.removeChild(n)})),P.length=0},U=()=>void 0!==l?l:c?c.getFill():"both",V=()=>void 0!==v?v:void 0!==f?f:c?c.getDirection():"normal",X=()=>S?"linear":void 0!==m?m:c?c.getEasing():"linear",Y=()=>T?0:void 0!==y?y:void 0!==s?s:c?c.getDuration():0,_=()=>void 0!==d?d:c?c.getIterations():1,nn=()=>void 0!==p?p:void 0!==r?r:c?c.getDelay():0,tn=()=>{0!==w&&(w--,0===w&&((()=>{fn(),B.forEach((n=>n())),G.forEach((n=>n()));const n=R?1:0,i=E,e=q,o=h;z.forEach((n=>{const a=n.classList;i.forEach((n=>a.add(n))),e.forEach((n=>a.remove(n)));for(const i in o)o.hasOwnProperty(i)&&t(n,i,o[i])})),M.forEach((i=>i.c(n,$))),x.forEach((i=>i.c(n,$))),x.length=0,W=!0,R&&(D=!0),R=!0})(),c&&c.animationFinish()))},en=(e=!0)=>{Q();const a=((r=g).forEach((n=>{for(const i in n)if(n.hasOwnProperty(i)){const t=n[i];if("easing"===i)n["animation-timing-function"]=t,delete n[i];else{const e=i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();e!==i&&(n[e]=t,delete n[i])}}})),r);var r;z.forEach((r=>{if(a.length>0){const s=((n=[])=>n.map((n=>{const i=n.offset,t=[];for(const i in n)n.hasOwnProperty(i)&&"offset"!==i&&t.push(`${i}: ${n[i]};`);return`${100*i}% { ${t.join(" ")} }`})).join(" "))(a);A=void 0!==n?n:(n=>{let i=o.indexOf(n);return i<0&&(i=o.push(n)-1),`cy-animation-${i}`})(s);const m=((n,t,e)=>{const o=(n=>{const i=n.getRootNode?n.getRootNode():document;return i.head||i})(e),a=i(e),r=o.querySelector("#"+n);if(r)return r;const s=(e.ownerDocument||document).createElement("style");return s.id=n,s.textContent=`@${a}keyframes ${n} { ${t} } @${a}keyframes ${n}-alt { ${t} }`,o.appendChild(s),s})(A,s,r);P.push(m),t(r,"animation-duration",`${Y()}ms`),t(r,"animation-timing-function",X()),t(r,"animation-delay",`${nn()}ms`),t(r,"animation-fill-mode",U()),t(r,"animation-direction",V());const d=_()===1/0?"infinite":_().toString();t(r,"animation-iteration-count",d),t(r,"animation-play-state","paused"),e&&t(r,"animation-name",`${m.id}-alt`),requestAnimationFrame((()=>{t(r,"animation-name",m.id||null)}))}}))},on=(n=!0)=>{(()=>{Z.forEach((n=>n())),j.forEach((n=>n()));const n=b,i=F,e=C;z.forEach((o=>{const a=o.classList;n.forEach((n=>a.add(n))),i.forEach((n=>a.remove(n)));for(const n in e)e.hasOwnProperty(n)&&t(o,n,e[n])}))})(),g.length>0&&(L?(z.forEach((n=>{const i=n.animate(g,{id:I,delay:nn(),duration:Y(),easing:X(),iterations:_(),fill:U(),direction:V()});i.pause(),H.push(i)})),H.length>0&&(H[0].onfinish=()=>{tn()})):en(n)),k=!0},an=n=>{if(n=Math.min(Math.max(n,0),.9999),L)H.forEach((i=>{i.currentTime=i.effect.getComputedTiming().delay+Y()*n,i.pause()}));else{const i=`-${Y()*n}ms`;z.forEach((n=>{g.length>0&&(t(n,"animation-delay",i),t(n,"animation-play-state","paused"))}))}},rn=n=>{H.forEach((n=>{n.effect.updateTiming({delay:nn(),duration:Y(),easing:X(),iterations:_(),fill:U(),direction:V()})})),void 0!==n&&an(n)},sn=(n=!0,i)=>{requestAnimationFrame((()=>{z.forEach((e=>{t(e,"animation-name",A||null),t(e,"animation-duration",`${Y()}ms`),t(e,"animation-timing-function",X()),t(e,"animation-delay",void 0!==i?`-${i*Y()}ms`:`${nn()}ms`),t(e,"animation-fill-mode",U()||null),t(e,"animation-direction",V()||null);const o=_()===1/0?"infinite":_().toString();t(e,"animation-iteration-count",o),n&&t(e,"animation-name",`${A}-alt`),requestAnimationFrame((()=>{t(e,"animation-name",A||null)}))}))}))},mn=(n=!1,i=!0,t)=>(n&&K.forEach((e=>{e.update(n,i,t)})),L?rn(t):sn(i,t),$),dn=()=>{k&&(L?H.forEach((n=>{n.pause()})):z.forEach((n=>{t(n,"animation-play-state","paused")})))},ln=()=>{u=void 0,tn()},fn=()=>{u&&clearTimeout(u)},cn=n=>new Promise((i=>{n&&n.sync&&(T=!0,N((()=>T=!1),{oneTimeCallback:!0})),k||on(),D&&(L?(an(0),rn()):sn(),D=!1),W&&(w=K.length+1,W=!1),N((()=>i()),{oneTimeCallback:!0}),K.forEach((n=>{n.play()})),L?(H.forEach((n=>{n.play()})),0!==g.length&&0!==z.length||tn()):(()=>{if(fn(),requestAnimationFrame((()=>{z.forEach((n=>{g.length>0&&t(n,"animation-play-state","running")}))})),0===g.length||0===z.length)tn();else{const n=nn()||0,i=Y()||0,t=_()||1;isFinite(t)&&(u=setTimeout(ln,n+i*t+100)),(n=>{let i;const t={passive:!0},o=t=>{n===t.target&&(i&&i(),fn(),requestAnimationFrame((()=>{z.forEach((n=>{e(n,"animation-duration"),e(n,"animation-delay"),e(n,"animation-play-state")})),requestAnimationFrame(tn)})))};n&&(n.addEventListener("webkitAnimationEnd",o,t),n.addEventListener("animationend",o,t),i=()=>{n.removeEventListener("webkitAnimationEnd",o,t),n.removeEventListener("animationend",o,t)})})(z[0])}})()})),un=(n,i)=>{const t=g[0];return void 0===t||void 0!==t.offset&&0!==t.offset?g=[{offset:0,[n]:i},...g]:t[n]=i,$};return $={parentAnimation:c,elements:z,childAnimations:K,id:I,animationFinish:tn,from:un,to:(n,i)=>{const t=g[g.length-1];return void 0===t||void 0!==t.offset&&1!==t.offset?g=[...g,{offset:1,[n]:i}]:t[n]=i,$},fromTo:(n,i,t)=>un(n,i).to(n,t),parent:n=>(c=n,$),play:cn,pause:()=>(K.forEach((n=>{n.pause()})),dn(),$),stop:()=>{K.forEach((n=>{n.stop()})),k&&(O(),k=!1),S=!1,T=!1,W=!0,v=void 0,y=void 0,p=void 0,w=0,D=!1,R=!0},destroy:n=>(K.forEach((i=>{i.destroy(n)})),(n=>{O(),n&&Q()})(n),z.length=0,K.length=0,g.length=0,M.length=0,x.length=0,k=!1,W=!0,$),keyframes:n=>(g=n,$),addAnimation:n=>{if(null!=n)if(Array.isArray(n))for(const i of n)i.parent($),K.push(i);else n.parent($),K.push(n);return $},addElement:n=>{if(null!=n)if(1===n.nodeType)z.push(n);else if(n.length>=0)for(let i=0;i<n.length;i++)z.push(n[i]);else console.error("Invalid addElement value");return $},update:mn,fill:n=>(l=n,mn(!0),$),direction:n=>(f=n,mn(!0),$),iterations:n=>(d=n,mn(!0),$),duration:n=>(L||0!==n||(n=1),s=n,mn(!0),$),easing:n=>(m=n,mn(!0),$),delay:n=>(r=n,mn(!0),$),getWebAnimations:()=>H,getKeyframes:()=>g,getFill:U,getDirection:V,getDelay:nn,getIterations:_,getEasing:X,getDuration:Y,afterAddRead:n=>(B.push(n),$),afterAddWrite:n=>(G.push(n),$),afterClearStyles:(n=[])=>{for(const i of n)h[i]="";return $},afterStyles:(n={})=>(h=n,$),afterRemoveClass:n=>(q=a(q,n),$),afterAddClass:n=>(E=a(E,n),$),beforeAddRead:n=>(Z.push(n),$),beforeAddWrite:n=>(j.push(n),$),beforeClearStyles:(n=[])=>{for(const i of n)C[i]="";return $},beforeStyles:(n={})=>(C=n,$),beforeRemoveClass:n=>(F=a(F,n),$),beforeAddClass:n=>(b=a(b,n),$),onFinish:N,progressStart:(n=!1,i)=>(K.forEach((t=>{t.progressStart(n,i)})),dn(),S=n,k?mn(!1,!0,i):on(),$),progressStep:n=>(K.forEach((i=>{i.progressStep(n)})),an(n),$),progressEnd:(n,i,t)=>(S=!1,K.forEach((e=>{e.progressEnd(n,i,t)})),void 0!==t&&(y=t),D=!1,R=!0,0===n?(v="reverse"===V()?"normal":"reverse","reverse"===v&&(R=!1),L?(mn(),an(1-i)):(p=(1-i)*Y()*-1,mn(!1,!1))):1===n&&(L?(mn(),an(i)):(p=i*Y()*-1,mn(!1,!1))),void 0!==n&&(N((()=>{y=void 0,v=void 0,p=void 0}),{oneTimeCallback:!0}),c||cn()),$)}};export{r as c}