import{r as t,c as s,w as e,h as i,H as n,g as r}from"./p-56a9573e.js";import{c as o}from"./p-d2880d55.js";let a=class{constructor(e){t(this,e),this.cyChange=s(this,"cyChange",7),this.color="",this.value="",this.scrollable=!1}componentDidLoad(){this.gesture=o({el:this.el,direction:"x",passive:!0,maxAngle:35,threshold:0,canStart:this.canStart.bind(this),onStart:this.onStart.bind(this),onMove:this.onMove.bind(this),onEnd:this.onEnd.bind(this)}),this.gesture.enable(!this.scrollable),this.updateCurrent()}canStart(t){return this.getSegmentButtonEL(t.event)===this.currentEl}onStart(){this.currentEl.classList.add("segment-button-active")}onMove(t){this.setNextButton(t)}onEnd(){this.currentEl.classList.remove("segment-button-active")}setNextButton(t){const s=this.currentEl,e=s.getBoundingClientRect(),i=document.elementFromPoint(t.currentX,e.y);i&&"CY-SEGMENT-BUTTON"===i.tagName&&i!==s&&this.checkButton(s,i)}clickSeg(t){const s=this.getSegmentButtonEL(t);s&&s!=this.currentEl&&(this.value=s.value,this.cyChange.emit(this.value),this.currentEl?this.checkButton(this.currentEl,s):this.updateCurrent())}getIndicator(t){return(t.shadowRoot||t).querySelector(".segment-button-indicator")}checkButton(t,s){const i=this.getIndicator(t),n=this.getIndicator(s);if(null===i||null===n)return;const r=i.getBoundingClientRect(),o=n.getBoundingClientRect(),a=this.clacTransform(r,o);e((()=>{n.classList.remove("segment-change-animation"),n.style.setProperty("transform",a),n.getBoundingClientRect(),n.classList.add("segment-change-animation"),n.style.setProperty("transform","")})),this.value=s.value,this.updateCurrent()}clacTransform(t,s){return`translate3d(${t.left-s.left}px, 0, 0) scaleX(${t.width/s.width})`}updateCurrent(){const t=Array.from(this.el.querySelectorAll("cy-segment-button"));this.currentEl=t.find((t=>t.value===this.value)),t.forEach((t=>{t.update(),t.classList.remove("segment-button-after-checked")})),this.currentEl.nextSibling&&this.currentEl.nextSibling.classList.add("segment-button-after-checked")}getSegmentButtonEL(t){const s=t.target;return"CY-SEGMENT-BUTTON"===s.tagName?s:s.closest("cy-segment-button")}render(){return i(n,{onClick:t=>{this.clickSeg(t)},class:{[`cy-color-${this.color}`]:!!this.color}},i("div",{class:{"segment-box":!0,"overfrow-scroll":this.scrollable}},i("slot",null)))}get el(){return r(this)}};a.style=":host{--border-radius:8px;border-radius:var(--border-radius);cursor:pointer;user-select:none;display:block;background:rgba(var(--cy-color-base-rgb), 0.2);box-shadow:0 0 5px rgba(var(--cy-background-contrast-rgb), 0.16)}.segment-box{display:flex;flex-direction:row;align-items:center}.overfrow-scroll{overflow:auto;display:inline-flex;flex-wrap:nowrap;max-width:100%}";export{a as cy_segment}