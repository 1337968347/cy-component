let t;const e=(e,n,o,r)=>{let s=null;return s=(e=>{if(void 0!==t)return!!t;try{e.addEventListener("optsTest",null,Object.defineProperty({},"passive",{get:function(){t=!0}}))}catch(e){t=!1}})(e)?{passage:!!r.passive,capture:!!r.capture}:!!r.capture,e.addEventListener(n,o,s),()=>{e.removeEventListener(n,o,s)}},n=t=>t instanceof Document?t:t.ownerDocument,o=t=>{let o=!1,u=!1,a=!0,i=!1;const d=Object.assign({direction:"x",passive:!0,maxAngle:40,threshold:10},t),l={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},v=d.canStart,m=d.onWillStart,p=d.onStart,f=d.onMove,h=d.onEnd,y=d.passive,D=d.blurOnStart,b=d.threshold,g=((t,e,n)=>{const o=n*(Math.PI/180),r="x"===t,s=Math.cos(o),c=e*e;let u=0,a=0,i=!1,d=0;return{start(t,e){u=t,a=e,d=0,i=!0},detect(t,e){if(!i)return!1;const n=t-u,o=e-a,l=n*n+o*o;if(l<c)return!1;const v=Math.sqrt(l),m=(r?n:o)/v;return d=m>s?1:m<-s?-1:0,i=!1,!0},isGesture:()=>0!==d,getDirection:()=>d}})(d.direction,d.threshold,d.maxAngle),x=()=>{o&&(i=!1,f&&f(l))},M=t=>{const e=a,n=o;Y(),e&&(s(l,t),n&&h&&h(l))},T=()=>(o=!0,a=!1,l.startX=l.currentX,l.startY=l.currentY,l.startTime=l.currentTime,m?m(l).then((()=>{X()})):X(),!0),X=()=>{D&&r(),p&&p(l),a=!0},Y=()=>{o=!1,u=!1,i=!1,a=!0},j=((t,o,r,s,c)=>{let u,a,i,d,l,v,m,p=0;const f=n=>{p=Date.now()+2e3,o(n)&&(!l&&r&&(l=e(t,"touchmove",r,c)),v||(v=e(t,"touchend",D,c)),m||(m=e(t,"touchcancel",D,c)))},h=u=>{Date.now()<p||o(u)&&(!a&&r&&(a=e(n(t),"mousemove",r,c)),!i&&s&&(i=e(n(t),"mouseup",y,c)))},y=t=>{b(),s&&s(t)},D=t=>{g(),s&&s(t)},b=()=>{a&&a(),i&&i(),a=i=void 0},g=()=>{l&&l(),v&&v(),m&&m(),l=v=m=void 0},x=()=>{b(),g()},M=(n=!0)=>{n?(d||(d=e(t,"touchstart",f,c)),u||(u=e(t,"mousedown",h,c))):(d&&d(),u&&u(),d=u=void 0,x())};return{stop:x,destory:()=>{M(!1),o=r=s=void 0},enable:M}})(d.el,(t=>{if(u||!a)return!1;u=!0;const e=Date.now();return c(t,l),l.startTime=e,l.currentTime=e,l.startX=l.currentX,l.startY=l.currentY,l.event=t,v&&!1===v(l)?(Y(),!1):0===b?T():(g.start(l.startX,l.startY),!0)}),(t=>{o?!i&&a&&(i=!0,s(l,t),requestAnimationFrame(x)):(s(l,t),g.detect(l.currentX,l.currentY)&&g.isGesture()&&T())}),M,{passive:y,capture:!1});return{enable:(t=!0)=>{t||(Y(),o&&M(void 0)),j.enable(t)},destroy:()=>{j.destory()}}},r=()=>{if("undefined"!=typeof document){const t=document.activeElement;!t&&t.blur&&t.blur()}},s=(t,e)=>{if(!e)return;c(e,t);const n=t.currentY;t.deltaX=t.currentX-t.startX,t.deltaY=n-t.startY,t.event=e},c=(t,e)=>{let n=0,o=0;if(t){const e=t.changedTouches;if(e&&e.length>0){const t=e[0];n=t.clientX,o=t.clientY}else void 0!==t.pageX&&(n=t.pageX,o=t.pageY)}e.currentX=n,e.currentY=o};export{o as c}