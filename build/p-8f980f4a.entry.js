import{r as t,c as s,w as e,h as n,H as r,g as i}from"./p-c18fa1fb.js";import{c as o}from"./p-27ad0b6e.js";const h=class{constructor(e){t(this,e),this.cyChange=s(this,"cyChange",7),this.color="",this.value="",this.scrollable=!1}componentDidLoad(){this.gesture=o({el:this.el,direction:"x",passive:!0,maxAngle:35,threshold:0,canStart:this.canStart.bind(this),onStart:this.onStart.bind(this),onMove:this.onMove.bind(this),onEnd:this.onEnd.bind(this)}),this.gesture.enable(!this.scrollable),this.updateCurrent()}canStart(t){return this.getSegmentButtonEL(t.event)===this.currentEl}onStart(){this.currentEl.classList.add("segment-button-active")}onMove(t){this.setNextButton(t)}onEnd(){this.currentEl.classList.remove("segment-button-active")}setNextButton(t){const s=this.currentEl,e=s.getBoundingClientRect(),n=document.elementFromPoint(t.currentX,e.y);n&&"CY-SEGMENT-BUTTON"===n.tagName&&n!==s&&this.checkButton(s,n)}clickSeg(t){const s=this.getSegmentButtonEL(t);s&&s!=this.currentEl&&(this.value=s.value,this.cyChange.emit(this.value),this.currentEl?this.checkButton(this.currentEl,s):this.updateCurrent())}getIndicator(t){return(t.shadowRoot||t).querySelector(".segment-button-indicator")}checkButton(t,s){const n=this.getIndicator(t),r=this.getIndicator(s);if(null===n||null===r)return;const i=n.getBoundingClientRect(),o=r.getBoundingClientRect(),h=this.clacTransform(i,o);e((()=>{r.classList.remove("segment-change-animation"),r.style.setProperty("transform",h),r.getBoundingClientRect(),r.classList.add("segment-change-animation"),r.style.setProperty("transform","")})),this.value=s.value,this.updateCurrent()}clacTransform(t,s){return`translate3d(${t.left-s.left}px, 0, 0) scaleX(${t.width/s.width})`}updateCurrent(){const t=Array.from(this.el.querySelectorAll("cy-segment-button"));this.currentEl=t.find((t=>t.value===this.value)),t.forEach((t=>{t.update(),t.classList.remove("segment-button-after-checked")})),this.currentEl.nextSibling&&this.currentEl.nextSibling.classList.add("segment-button-after-checked")}getSegmentButtonEL(t){const s=t.target;return"CY-SEGMENT-BUTTON"===s.tagName?s:s.closest("cy-segment-button")}render(){return n(r,{onClick:t=>{this.clickSeg(t)},class:{[`cy-color-${this.color}`]:!!this.color,"overfrow-scroll":this.scrollable}},n("slot",null))}get el(){return i(this)}};h.style=":host{--border-radius:8px;display:inline-flex;flex-wrap:nowrap;border-radius:var(--border-radius);cursor:pointer;user-select:none;background:rgba(var(--cy-color-base-rgb), 0.2);box-shadow:0 0 5px rgba(var(--cy-background-contrast-rgb), 0.16)}:host(.overfrow-scroll){overflow:auto;max-width:100%}";export{h as cy_segment}