import{C as n,G as t,a as s,U as e,V as o,L as c,b as a,c as r,T as i,M as l,d as f,e as u,f as d,g as p,S as w,B as m}from"./p-328a110d.js";const $="app";let h=false;const b=(n,t="")=>{{return()=>{}}};const y=(n,t)=>{{return()=>{}}};const g="{visibility:hidden}.hydrated{visibility:inherit}";function v(n){var t,s,e;return(e=(s=(t=n.head)===null||t===void 0?void 0:t.querySelector('meta[name="csp-nonce"]'))===null||s===void 0?void 0:s.getAttribute("content"))!==null&&e!==void 0?e:undefined}const k=(n,t,s)=>{const e=D.ce(t,s);n.dispatchEvent(e);return e};const x=(n,t)=>{if(t&&!n.t&&t["s-p"]){t["s-p"].push(new Promise((t=>n.t=t)))}};const j=(n,t)=>{if(n.o&4){n.o|=512;return}x(n,n.i);const s=()=>C(n);return tn(s)};const C=(n,t)=>{const s=b("scheduleUpdate",n.u.l);const e=n.p;let o;s();return M(o,(()=>U(n,e)))};const M=(n,t)=>P(n)?n.then(t):t();const P=n=>n instanceof Promise||n&&n.then&&typeof n.then==="function";const U=async(n,t,s)=>{var e;const o=n.m;const c=b("update",n.u.l);const a=o["s-rc"];const r=b("render",n.u.l);{E(n,t)}if(a){a.map((n=>n()));o["s-rc"]=undefined}r();c();{const t=(e=o["s-p"])!==null&&e!==void 0?e:[];const s=()=>L(n);if(t.length===0){s()}else{Promise.all(t).then(s);n.o|=4;t.length=0}}};const E=(n,t,s)=>{try{t=t.render();{n.o|=2}}catch(t){F(t,n.m)}return null};const L=n=>{const t=n.u.l;const s=n.m;const e=b("postUpdate",t);const o=n.i;if(!(n.o&64)){n.o|=64;{T(s)}e();{n.$(s);if(!o){S()}}}else{e()}{if(n.t){n.t();n.t=undefined}if(n.o&512){nn((()=>j(n)))}n.o&=~(4|512)}};const S=n=>{{T(z.documentElement)}nn((()=>k(W,"appload",{detail:{namespace:$}})))};const T=n=>n.classList.add("hydrated");const O=(n,t,s)=>n;const _=async(n,t,s,e,o)=>{if((t.o&32)===0){t.o|=32;{o=N(s);if(o.then){const n=y();o=await o;n()}const n=b("createInstance",s.l);try{new o(t)}catch(n){F(n)}n()}}const c=t.i;const a=()=>j(t);if(c&&c["s-rc"]){c["s-rc"].push(a)}else{a()}};const H=n=>{if((D.o&1)===0){const t=A(n);const s=t.u;const e=b("connectedCallback",s.l);if(!(t.o&1)){t.o|=1;{let s=n;while(s=s.parentNode||s.host){if(s["s-p"]){x(t,t.i=s);break}}}{_(n,t,s)}}e()}};const I=n=>{if((D.o&1)===0){A(n)}};const R=(n,t={})=>{var s;const e=b();const o=[];const c=t.exclude||[];const a=W.customElements;const r=z.head;const i=r.querySelector("meta[charset]");const l=z.createElement("style");const f=[];let u;let d=true;Object.assign(D,t);D.h=new URL(t.resourcesUrl||"./",z.baseURI).href;n.map((n=>{n[1].map((t=>{const s={o:t[0],l:t[1],g:t[2],v:t[3]};const e=s.l;const r=class extends HTMLElement{constructor(n){super(n);n=this;B(n,s)}connectedCallback(){if(u){clearTimeout(u);u=null}if(d){f.push(this)}else{D.jmp((()=>H(this)))}}disconnectedCallback(){D.jmp((()=>I(this)))}componentOnReady(){return A(this).k}};s.j=n[0];if(!c.includes(e)&&!a.get(e)){o.push(e);a.define(e,O(r))}}))}));{l.innerHTML=o+g;l.setAttribute("data-styles","");const n=(s=D.C)!==null&&s!==void 0?s:v(z);if(n!=null){l.setAttribute("nonce",n)}r.insertBefore(l,i?i.nextSibling:r.firstChild)}d=false;if(f.length){f.map((n=>n.connectedCallback()))}else{{D.jmp((()=>u=setTimeout(S,30)))}}e()};const V=n=>D.C=n;const q=new WeakMap;const A=n=>q.get(n);const B=(n,t)=>{const s={o:0,m:n,u:t,M:new Map};{s.k=new Promise((n=>s.$=n));n["s-p"]=[];n["s-rc"]=[]}return q.set(n,s)};const F=(n,t)=>(0,console.error)(n,t);const G=new Map;const N=(n,t,s)=>{const e=n.l.replace(/-/g,"_");const o=n.j;const c=G.get(o);if(c){return c[e]}
/*!__STENCIL_STATIC_IMPORT_SWITCH__*/return import(`./${o}.entry.js${""}`).then((n=>{{G.set(o,n)}return n[e]}),F)};const W=typeof window!=="undefined"?window:{};const z=W.document||{head:{}};const D={o:0,h:"",jmp:n=>n(),raf:n=>requestAnimationFrame(n),ael:(n,t,s,e)=>n.addEventListener(t,s,e),rel:(n,t,s,e)=>n.removeEventListener(t,s,e),ce:(n,t)=>new CustomEvent(n,t)};const J=n=>Promise.resolve(n);const K=[];const Q=[];const X=(n,t)=>s=>{n.push(s);if(!h){h=true;if(t&&D.o&4){nn(Z)}else{D.raf(Z)}}};const Y=n=>{for(let t=0;t<n.length;t++){try{n[t](performance.now())}catch(n){F(n)}}n.length=0};const Z=()=>{Y(K);{Y(Q);if(h=K.length>0){D.raf(Z)}}};const nn=n=>J().then(n);const tn=X(Q,true);const{CameraController:sn,InputHandler:en}=s;const{parseObj:on,Clock:cn}=e;const an={pos:new o(0,0,14),color:new o(.7,.7,.7)};let rn={light:an};let ln=new cn;let fn;let un=new n;const dn=document.querySelector("canvas");const pn=document.querySelector("#fps");const wn=new c("./assets/");dn.width=500;dn.height=500;let mn=new t({canvasEl:dn});let $n=new en(dn);const hn=["./skybox/top.jpg","./skybox/bottom.jpg","./skybox/front.jpg","./skybox/back.jpg","./skybox/left.jpg","./skybox/right.jpg"];wn.load(["texture.png","wall_normal_map.png",...hn]);const bn=()=>{const{position:n,normal:t,texcoord:s}=on(r);const e=[];const o=[];const c=[];for(let a=0;a<n.length;a+=3){e.push(new p(n[a],n[a+1],n[a+2],1));o.push(new p(s[a],s[a+1],0,1));c.push(new p(t[a],t[a+1],t[a+2],1))}const $={ambientStrength:.8,diffuseStrength:.9,specularStrength:1,shininess:50};let h;const b=new w(m);h=new i([new l({position:e,texcoord:o,normal:c})]);h.wordMatrix=(new f).makeScale(10,-10,10);const y=new u(b,new a({blackLightMaterial:$,texture:new d(wn.resources["texture.png"])}),[h]);return y};const yn=()=>{fn=new sn($n,un);const n=bn();const t=new a(rn,[n]);un.append(t);mn.append(un);un.position.set(0,0,15)};let gn="";const vn=n=>{pn.innerHTML=ln.fps+"";fn.tick();const t=`${un.position.x}-${un.position.y}-${un.position.z}-${un.x}-${un.y}`;if(gn===t)return;gn=t;mn.tick()};wn.onRendy=()=>{yn();ln.setOnTick(vn);ln.start();window["camera"]=un;window["clock"]=ln};export{R as b,J as p,V as s};
//# sourceMappingURL=p-d40a0503.js.map