import{r as n,j as t,h as o,H as e,e as i}from"./p-900143dd.js";import"./p-36ddbbc3.js";import{D as s}from"./p-f14a9a94.js";const a=class{constructor(o){n(this,o),this.dataScreenList=[],this.popover=t(this,"popover",7),this.alert=t(this,"alert",7)}componentWillLoad(){this.getDataScreenListData()}async getDataScreenListData(){let n=await s.getDataScreenIdList();this.dataScreenList=await Promise.all(n.map(async n=>await s.getDataScreenOptionById(n)))}addNewCanvas(){this.history.push("/new")}jumpToCanvasEdit(n){this.history.push(`canvas/${n}/edit`)}jumpTOCanvasPreview(n){this.history.push(`canvas/${n}/preview`)}async removeCanvas(n){this.alert.emit({header:"删除",message:`确定要删除 ${n.name}？`,buttons:[{text:"取消",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"确定",handler:()=>{s.deleteDataScreen(n.id).then(()=>{this.getDataScreenListData()})}}]})}popoverThemeSelectBox(){this.popover.emit({component:"popover-theme"})}popoverCodeModify(n){this.popover.emit({component:"popover-code-modify",cssClass:"code-view-popover",componentProps:{dataScreenId:n,dismissCallBack:()=>{this.getDataScreenListData()}}})}handleDataSCreenChange(n,t,o){n[t]=o,this.dataScreenList=[...this.dataScreenList],s.setDataScreenOptionById(n.id,n)}render(){return o(e,{class:"ion-page"},o("ion-header",null,o("ion-toolbar",null,o("div",{slot:"start",class:"title"},o("img",{src:"../../assets/icon/icon-192.png"}),"  DataScreen"),o("ion-buttons",{slot:"end"},o("ion-button",{title:"导入",class:"header-btn",onClick:()=>{this.popoverCodeModify("")}},o("ion-icon",{slot:"icon-only",name:"code"})),o("ion-button",{title:"主题",class:"header-btn",onClick:()=>{this.popoverThemeSelectBox()}},o("ion-icon",{slot:"icon-only",name:"color-palette"}))))),o("ion-content",null,o("div",{class:"canvas-box"},o("ion-card",{button:!0,onClick:()=>{this.addNewCanvas()},class:"add-canvas"},o("div",{class:"add-card-content"},o("ion-icon",{name:"add"}),o("br",null),o("span",null,"新建可视化"))),this.dataScreenList.map(n=>o("ion-card",{onClick:()=>{this.jumpToCanvasEdit(n.id)}},o("div",{style:{"background-image":`url(${n.scaleImg||"../../assets/image/default-canvas.png"})`},class:"canvas-preivew"}),o("ion-card-content",null,o("ion-item",{onClick:n=>{n.stopPropagation(),n.preventDefault()},lines:"none"},o("ion-icon",{name:"create",slot:"start"}),o("ion-input",{debounce:800,onIonChange:t=>{this.handleDataSCreenChange(n,"name",t.detail.value)},value:n.name}),o("ion-buttons",{slot:"end"},o("ion-button",{color:"danger",onClick:()=>{this.removeCanvas(n)},title:"删除",fill:"outline"},o("ion-icon",{slot:"icon-only",name:"trash"})),o("ion-button",{onClick:()=>{this.popoverCodeModify(n.id)},title:"代码",fill:"outline"},o("ion-icon",{slot:"icon-only",name:"code"})),o("ion-button",{onClick:()=>{this.jumpTOCanvasPreview(n.id)},title:"预览",fill:"outline"},o("ion-icon",{slot:"icon-only",name:"easel"}))))))))))}get el(){return i(this)}static get style(){return"app-manage ion-toolbar{height:50px}app-manage .title{height:100%;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;color:var(--ion-text-color);font-size:calc(2 * var(--font-size));padding-left:20px}app-manage .title img{width:40px}app-manage .canvas-box{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-line-pack:start;align-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;padding-top:8px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding-bottom:50px;padding-left:4px}app-manage .canvas-box ion-card{margin:16px;width:380px;height:281px;--color:var(--ion-text-color);--background:var(--ion-background-contrast)}app-manage .canvas-box ion-card ion-card-content{-webkit-padding-start:0;padding-inline-start:0;-webkit-padding-end:0;padding-inline-end:0}app-manage .canvas-box ion-card button{height:100%}app-manage .canvas-box ion-card .canvas-preivew{height:220px;background-size:contain;background-position:50%;background-repeat:no-repeat;-webkit-filter:grayscale(1);filter:grayscale(1)}app-manage .canvas-box .add-canvas{--color:var(--ion-background-contrast);--background:linear-gradient(-90deg,var(--ion-background-shade),var(--ion-background-color));color:var(--color)}app-manage .canvas-box .add-canvas .add-card-content{height:100%;width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}app-manage .canvas-box .add-canvas .add-card-content ion-icon{width:45px;height:45px}app-manage .canvas-box .add-canvas .add-card-content span{font-size:calc(1.5 * var(--font-size))}"}};export{a as app_manage};