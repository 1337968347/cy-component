var __awaiter=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function a(t){try{u(r.next(t))}catch(e){i(e)}}function s(t){try{u(r["throw"](t))}catch(e){i(e)}}function u(t){t.done?n(t.value):o(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))};var __generator=this&&this.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return u([t,e])}}function u(a){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,o&&(i=a[0]&2?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;if(o=0,i)a=[a[0]&2,i.value];switch(a[0]){case 0:case 1:i=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;o=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1];i=a;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(a);break}if(i[2])n.ops.pop();n.trys.pop();continue}a=e.call(t,n)}catch(s){a=[6,s];o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};System.register(["./p-a2936c11.system.js","./p-e8fb2e42.system.js","./p-b9aef7e7.system.js","./p-3f376874.system.js","./p-1284c5fd.system.js","./p-b0e469e2.system.js","./p-6b5506eb.system.js","./p-8abcb78c.system.js","./p-a0f88c1c.system.js","./p-3d91fd26.system.js"],(function(t,e){"use strict";var n,r,o,i,a,s,u,c,f,l,h,p,v,d,y,g,m,b,w,_,T,P,O,k,L,S,j,x,E,C,U;return{setters:[function(t){n=t.r;r=t.h;o=t.d;i=t.c;a=t.H;s=t.e;u=t.i;c=t.f},function(){},function(){},function(){},function(){},function(){},function(t){f=t.t;l=t.p;h=t.a;p=t.b;v=t.l},function(t){d=t.m;y=t.a;g=t.s;m=t.b;b=t.c;w=t.d;_=t.h;T=t.e;P=t.f;O=t.g;k=t.l},function(t){L=t.A},function(t){S=t.s;j=t.a;x=t.b;E=t.g;C=t.i;U=t.c}],execute:function(){var B=t("app_root",function(){function t(t){n(this,t);this.isOk=false}t.prototype.presentToast=function(t){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(n){switch(n.label){case 0:return[4,f.create({message:t.detail,position:"bottom",showCloseButton:false,duration:600})];case 1:e=n.sent();return[4,e.present()];case 2:return[2,n.sent()]}}))}))};t.prototype.presentPopover=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){l.create(t.detail).then((function(t){t.present()}));return[2]}))}))};t.prototype.presentAlert=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){h.create(t.detail).then((function(t){t.present()}));return[2]}))}))};t.prototype.presentActionSheet=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){p.create(t.detail).then((function(t){t.present()}));return[2]}))}))};t.prototype.presentLoadingWithOptions=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){v.create(t.detail).then((function(t){t.present()}));return[2]}))}))};t.prototype.componentWillLoad=function(){this.isOk=true;this.setCurrentTheme()};t.prototype.setCurrentTheme=function(){if(localStorage.getItem("theme")){document.querySelector("body").className=localStorage.getItem("theme")+""}};t.prototype.onSWUpdate=function(){return __awaiter(this,void 0,void 0,(function(){var t,e;return __generator(this,(function(n){switch(n.label){case 0:return[4,navigator.serviceWorker.getRegistration()];case 1:t=n.sent();if(!t||!t.waiting){return[2]}return[4,f.create({header:"新的版本可用",message:"即将清空localstorage",showCloseButton:true,closeButtonText:"确定"})];case 2:e=n.sent();return[4,e.present()];case 3:n.sent();return[4,e.onWillDismiss()];case 4:n.sent();t.waiting.postMessage("skipWaiting");localStorage.clear();window.location.reload();return[2]}}))}))};t.prototype.render=function(){if(this.isOk){return r("ion-app",null,r("main",null,r("stencil-router",{historyType:"hash",scrollTopOffset:0},r("stencil-route",{url:"/",component:"app-manage",exact:true}),r("stencil-route",{url:"/new",component:"app-create",exact:true}),r("stencil-route",{url:"/canvas/:dataScreenId/edit",component:"app-home",exact:true}),r("stencil-route",{url:"/canvas/:dataScreenId/preview",component:"app-preview",exact:true}))))}};Object.defineProperty(t,"style",{get:function(){return""},enumerable:true,configurable:true});return t}());var I=t("ion_app",function(){function t(t){n(this,t)}t.prototype.componentDidLoad=function(){{H((function(){var t=u(window,"hybrid");if(!i.getBoolean("_testing")){e.import("./p-243c1eb9.system.js").then((function(t){return t.startTapClick(i)}))}if(i.getBoolean("statusTap",t)){e.import("./p-02107c11.system.js").then((function(t){return t.startStatusTap()}))}if(i.getBoolean("inputShims",A())){e.import("./p-76f27ddb.system.js").then((function(t){return t.startInputShims(i)}))}if(i.getBoolean("hardwareBackButton",t)){e.import("./p-bdbb5b26.system.js").then((function(t){return t.startHardwareBackButton()}))}e.import("./p-3eb0573c.system.js").then((function(t){return t.startFocusVisible()}))}))}};t.prototype.render=function(){var t;var e=o(this);return r(a,{class:(t={},t[e]=true,t["ion-page"]=true,t["force-statusbar-padding"]=i.getBoolean("_forceStatusbarPadding"),t)})};Object.defineProperty(t.prototype,"el",{get:function(){return s(this)},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return"html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}"},enumerable:true,configurable:true});return t}());var A=function(){return u(window,"ios")&&u(window,"mobile")};var H=function(t){if("requestIdleCallback"in window){window.requestIdleCallback(t)}else{setTimeout(t,32)}};var R=t("stencil_route",function(){function t(t){n(this,t);this.group=null;this.match=null;this.componentProps={};this.exact=false;this.scrollOnNextRender=false;this.previousMatch=null}t.prototype.computeMatch=function(t){var e=this.group!=null||this.el.parentElement!=null&&this.el.parentElement.tagName.toLowerCase()==="stencil-route-switch";if(!t||e){return}this.previousMatch=this.match;return this.match=d(t.pathname,{path:this.url,exact:this.exact,strict:true})};t.prototype.loadCompleted=function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(e){t={};if(this.history&&this.history.location.hash){t={scrollToId:this.history.location.hash.substr(1)}}else if(this.scrollTopOffset){t={scrollTopOffset:this.scrollTopOffset}}if(typeof this.componentUpdated==="function"){this.componentUpdated(t)}else if(this.match&&!y(this.match,this.previousMatch)&&this.routeViewsUpdated){this.routeViewsUpdated(t)}return[2]}))}))};t.prototype.componentDidUpdate=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,this.loadCompleted()];case 1:t.sent();return[2]}}))}))};t.prototype.componentDidLoad=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,this.loadCompleted()];case 1:t.sent();return[2]}}))}))};t.prototype.render=function(){if(!this.match||!this.history){return null}var t=Object.assign({},this.componentProps,{history:this.history,match:this.match});if(this.routeRender){return this.routeRender(Object.assign({},t,{component:this.component}))}if(this.component){var e=this.component;return r(e,Object.assign({},t))}};Object.defineProperty(t.prototype,"el",{get:function(){return s(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{location:["computeMatch"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return"stencil-route.inactive{display:none}"},enumerable:true,configurable:true});return t}());L.injectProps(R,["location","history","historyType","routeViewsUpdated"]);var M=function(t){var e=[];for(var n=1;n<arguments.length;n++){e[n-1]=arguments[n]}if(!t){console.warn.apply(console,e)}};var V=function(){var t;var e=[];var n=function(e){M(t==null,"A history supports only one prompt at a time");t=e;return function(){if(t===e){t=null}}};var r=function(e,n,r,o){if(t!=null){var i=typeof t==="function"?t(e,n):t;if(typeof i==="string"){if(typeof r==="function"){r(i,o)}else{M(false,"A history needs a getUserConfirmation function in order to use a prompt message");o(true)}}else{o(i!==false)}}else{o(true)}};var o=function(t){var n=true;var r=function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}if(n){t.apply(void 0,e)}};e.push(r);return function(){n=false;e=e.filter((function(t){return t!==r}))}};var i=function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}e.forEach((function(e){return e.apply(void 0,t)}))};return{setPrompt:n,confirmTransitionTo:r,appendListener:o,notifyListeners:i}};var D=function(t,e){if(e===void 0){e="scrollPositions"}var n=new Map;var r=function(e,r){n.set(e,r);if(S(t,"sessionStorage")){var o=[];n.forEach((function(t,e){o.push([e,t])}));t.sessionStorage.setItem("scrollPositions",JSON.stringify(o))}};var o=function(t){return n.get(t)};var i=function(t){return n.has(t)};var a=function(e){r(e,[t.scrollX,t.scrollY])};if(S(t,"sessionStorage")){var s=t.sessionStorage.getItem(e);n=s?new Map(JSON.parse(s)):n}if("scrollRestoration"in t.history){history.scrollRestoration="manual"}return{set:r,get:o,has:i,capture:a}};var Y="popstate";var q="hashchange";var W=function(t,e){if(e===void 0){e={}}var n=false;var r=t.history;var o=t.location;var i=t.navigator;var a=j(t);var s=!x(i);var u=D(t);var c=e.forceRefresh!=null?e.forceRefresh:false;var f=e.getUserConfirmation!=null?e.getUserConfirmation:E;var l=e.keyLength!=null?e.keyLength:6;var h=e.basename?g(m(e.basename)):"";var p=function(){try{return t.history.state||{}}catch(e){return{}}};var v=function(t){t=t||{};var e=t.key,n=t.state;var r=o.pathname,i=o.search,a=o.hash;var s=r+i+a;M(!h||_(s,h),"You are attempting to use a basename on a page whose URL path does not begin "+'with the basename. Expected path "'+s+'" to begin with "'+h+'".');if(h){s=T(s,h)}return b(s,n,e||w(l))};var d=V();var y=function(t){u.capture(K.location.key);Object.assign(K,t);K.location.scrollPosition=u.get(K.location.key);K.length=r.length;d.notifyListeners(K.location,K.action)};var O=function(t){if(!C(i,t)){L(v(t.state))}};var k=function(){L(v(p()))};var L=function(t){if(n){n=false;y()}else{var e="POP";d.confirmTransitionTo(t,e,f,(function(n){if(n){y({action:e,location:t})}else{S(t)}}))}};var S=function(t){var e=K.location;var r=B.indexOf(e.key);var o=B.indexOf(t.key);if(r===-1){r=0}if(o===-1){o=0}var i=r-o;if(i){n=true;N(i)}};var U=v(p());var B=[U.key];var I=0;var A=false;var H=function(t){return h+P(t)};var R=function(t,e){M(!(typeof t==="object"&&t.state!==undefined&&e!==undefined),"You should avoid providing a 2nd state argument to push when the 1st "+"argument is a location-like object that already has state; it is ignored");var n="PUSH";var i=b(t,e,w(l),K.location);d.confirmTransitionTo(i,n,f,(function(t){if(!t){return}var e=H(i);var s=i.key,u=i.state;if(a){r.pushState({key:s,state:u},"",e);if(c){o.href=e}else{var f=B.indexOf(K.location.key);var l=B.slice(0,f===-1?0:f+1);l.push(i.key);B=l;y({action:n,location:i})}}else{M(u===undefined,"Browser history cannot push state in browsers that do not support HTML5 history");o.href=e}}))};var W=function(t,e){M(!(typeof t==="object"&&t.state!==undefined&&e!==undefined),"You should avoid providing a 2nd state argument to replace when the 1st "+"argument is a location-like object that already has state; it is ignored");var n="REPLACE";var i=b(t,e,w(l),K.location);d.confirmTransitionTo(i,n,f,(function(t){if(!t){return}var e=H(i);var s=i.key,u=i.state;if(a){r.replaceState({key:s,state:u},"",e);if(c){o.replace(e)}else{var f=B.indexOf(K.location.key);if(f!==-1){B[f]=i.key}y({action:n,location:i})}}else{M(u===undefined,"Browser history cannot replace state in browsers that do not support HTML5 history");o.replace(e)}}))};var N=function(t){r.go(t)};var X=function(){return N(-1)};var F=function(){return N(1)};var J=function(e){I+=e;if(I===1){t.addEventListener(Y,O);if(s){t.addEventListener(q,k)}}else if(I===0){t.removeEventListener(Y,O);if(s){t.removeEventListener(q,k)}}};var G=function(t){if(t===void 0){t=""}var e=d.setPrompt(t);if(!A){J(1);A=true}return function(){if(A){A=false;J(-1)}return e()}};var z=function(t){var e=d.appendListener(t);J(1);return function(){J(-1);e()}};var K={length:r.length,action:"POP",location:U,createHref:H,push:R,replace:W,go:N,goBack:X,goForward:F,block:G,listen:z,win:t};return K};var N="hashchange";var X={hashbang:{encodePath:function(t){return t.charAt(0)==="!"?t:"!/"+O(t)},decodePath:function(t){return t.charAt(0)==="!"?t.substr(1):t}},noslash:{encodePath:O,decodePath:m},slash:{encodePath:m,decodePath:m}};var F=function(t,e){if(e===void 0){e={}}var n=false;var r=null;var o=0;var i=false;var a=t.location;var s=t.history;var u=U(t.navigator);var c=e.keyLength!=null?e.keyLength:6;var f=e.getUserConfirmation,l=f===void 0?E:f,h=e.hashType,p=h===void 0?"slash":h;var v=e.basename?g(m(e.basename)):"";var d=X[p],y=d.encodePath,O=d.decodePath;var L=function(){var t=a.href;var e=t.indexOf("#");return e===-1?"":t.substring(e+1)};var S=function(t){return a.hash=t};var j=function(t){var e=a.href.indexOf("#");a.replace(a.href.slice(0,e>=0?e:0)+"#"+t)};var x=function(){var t=O(L());M(!v||_(t,v),"You are attempting to use a basename on a page whose URL path does not begin "+'with the basename. Expected path "'+t+'" to begin with "'+v+'".');if(v){t=T(t,v)}return b(t,undefined,w(c))};var C=V();var B=function(t){Object.assign(tt,t);tt.length=s.length;C.notifyListeners(tt.location,tt.action)};var I=function(){var t=L();var e=y(t);if(t!==e){j(e)}else{var o=x();var i=tt.location;if(!n&&k(i,o)){return}if(r===P(o)){return}r=null;A(o)}};var A=function(t){if(n){n=false;B()}else{var e="POP";C.confirmTransitionTo(t,e,l,(function(n){if(n){B({action:e,location:t})}else{H(t)}}))}};var H=function(t){var e=tt.location;var r=q.lastIndexOf(P(e));var o=q.lastIndexOf(P(t));if(r===-1){r=0}if(o===-1){o=0}var i=r-o;if(i){n=true;G(i)}};var R=L();var D=y(R);if(R!==D){j(D)}var Y=x();var q=[P(Y)];var W=function(t){return"#"+y(v+P(t))};var F=function(t,e){M(e===undefined,"Hash history cannot push state; it is ignored");var n="PUSH";var o=b(t,undefined,w(c),tt.location);C.confirmTransitionTo(o,n,l,(function(t){if(!t){return}var e=P(o);var i=y(v+e);var a=L()!==i;if(a){r=e;S(i);var s=q.lastIndexOf(P(tt.location));var u=q.slice(0,s===-1?0:s+1);u.push(e);q=u;B({action:n,location:o})}else{M(false,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack");B()}}))};var J=function(t,e){M(e===undefined,"Hash history cannot replace state; it is ignored");var n="REPLACE";var o=b(t,undefined,w(c),tt.location);C.confirmTransitionTo(o,n,l,(function(t){if(!t){return}var e=P(o);var i=y(v+e);var a=L()!==i;if(a){r=e;j(i)}var s=q.indexOf(P(tt.location));if(s!==-1){q[s]=e}B({action:n,location:o})}))};var G=function(t){M(u,"Hash history go(n) causes a full page reload in this browser");s.go(t)};var z=function(){return G(-1)};var K=function(){return G(1)};var Q=function(t,e){o+=e;if(o===1){t.addEventListener(N,I)}else if(o===0){t.removeEventListener(N,I)}};var Z=function(e){if(e===void 0){e=""}var n=C.setPrompt(e);if(!i){Q(t,1);i=true}return function(){if(i){i=false;Q(t,-1)}return n()}};var $=function(e){var n=C.appendListener(e);Q(t,1);return function(){Q(t,-1);n()}};var tt={length:s.length,action:"POP",location:Y,createHref:W,push:F,replace:J,go:G,goBack:z,goForward:K,block:Z,listen:$,win:t};return tt};var J=function(t,e){var n=t.pathname.indexOf(e)==0?"/"+t.pathname.slice(e.length):t.pathname;return Object.assign({},t,{pathname:n})};var G={browser:W,hash:F};var z=t("stencil_router",function(){function t(t){var e=this;n(this,t);this.root="/";this.historyType="browser";this.titleSuffix="";this.routeViewsUpdated=function(t){if(t===void 0){t={}}if(e.history&&t.scrollToId&&e.historyType==="browser"){var n=e.history.win.document.getElementById(t.scrollToId);if(n){return n.scrollIntoView()}}e.scrollTo(t.scrollTopOffset||e.scrollTopOffset)};this.isServer=c(this,"isServer");this.queue=c(this,"queue")}t.prototype.componentWillLoad=function(){var t=this;this.history=G[this.historyType](this.el.ownerDocument.defaultView);this.history.listen((function(e){e=J(e,t.root);t.location=e}));this.location=J(this.history.location,this.root)};t.prototype.scrollTo=function(t){var e=this.history;if(t==null||this.isServer||!e){return}if(e.action==="POP"&&Array.isArray(e.location.scrollPosition)){return this.queue.write((function(){if(e&&e.location&&Array.isArray(e.location.scrollPosition)){e.win.scrollTo(e.location.scrollPosition[0],e.location.scrollPosition[1])}}))}return this.queue.write((function(){e.win.scrollTo(0,t)}))};t.prototype.render=function(){if(!this.location||!this.history){return}var t={historyType:this.historyType,location:this.location,titleSuffix:this.titleSuffix,root:this.root,history:this.history,routeViewsUpdated:this.routeViewsUpdated};return r(L.Provider,{state:t},r("slot",null))};Object.defineProperty(t.prototype,"el",{get:function(){return s(this)},enumerable:true,configurable:true});return t}())}}}));